@using Microsoft.AspNetCore.Components.Rendering
@namespace Microsoft.Fast.Components.FluentUI

@if (_toastList.Any())
{
    <div class="fluent-toast-container @_positionClass">
        <CascadingValue TValue="InternalToastContext" IsFixed="true" Value="@_internalToastContext">
            @_renderToasts
        </CascadingValue>
    </div>

}

@code {
    protected void RenderToasts(RenderTreeBuilder __builder)
    {

        @foreach (var toast in _toastList.OrderBy(x => x.TimeStamp))
        {
            if (toast.CustomContent is not null)
            {
                <FluentToast @key="@toast" Id="@toast.Id" Intent="@toast.Intent" Settings="@toast.Settings">
                    @toast.CustomContent
                    @*@((RenderFragment)(__builder => toast.ToastContent(__builder)))*@
                </FluentToast>
            }
            else
            {
                <FluentToast @key="@toast" Id="@toast.Id" Intent="@toast.Intent" Title="@(toast.Title!)" Settings="@toast.Settings" />
            }
        }

    }

}
